{"status":{},"contains_secrets":false,"product_version":"3.1.1","spec":{"description":"this BP will clone sandbox from one account to another within frame.\nit is required to have unique name from the source account and destination account for the clone operation\n","resources":{"client_attrs":{"a3379536_deployment":{"y":360,"x":612}},"service_definition_list":[{"singleton":false,"action_list":[{"description":"System action for creating an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Service1"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"3d3beadc_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"fba4e3b0_runbook","main_task_local_reference":{"kind":"app_task","name":"3d3beadc_dag"},"variable_list":[]},"name":"action_create"},{"description":"System action for deleting an application. Deletes created VMs as well","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Service1"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"e403970b_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"e6209c8d_runbook","main_task_local_reference":{"kind":"app_task","name":"e403970b_dag"},"variable_list":[]},"name":"action_delete"},{"description":"System action for starting an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Service1"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"dc63ad45_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"f27d2cbc_runbook","main_task_local_reference":{"kind":"app_task","name":"dc63ad45_dag"},"variable_list":[]},"name":"action_start"},{"description":"System action for stopping an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Service1"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"22e4ee22_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"c9d1817e_runbook","main_task_local_reference":{"kind":"app_task","name":"22e4ee22_dag"},"variable_list":[]},"name":"action_stop"},{"description":"System action for restarting an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Service1"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"d2fe6dc0_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"acbd927c_runbook","main_task_local_reference":{"kind":"app_task","name":"d2fe6dc0_dag"},"variable_list":[]},"name":"action_restart"}],"depends_on_list":[],"name":"Service1","port_list":[],"tier":"","variable_list":[{"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","type":"LOCAL","name":"source_accountID","value":"","label":"","attrs":{"type":""},"is_hidden":false,"options":{"type":"PREDEFINED","choices":[]}},{"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","type":"LOCAL","name":"destination_accountID","value":"","label":"","attrs":{"type":""},"is_hidden":false,"options":{"type":"PREDEFINED","choices":[]}},{"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","type":"LOCAL","name":"sandbox_ip","value":"","label":"","attrs":{"type":""},"is_hidden":false,"options":{"type":"PREDEFINED","choices":[]}},{"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","type":"LOCAL","name":"endpoint_uuid","value":"","label":"","attrs":{"type":""},"is_hidden":false,"options":{"type":"PREDEFINED","choices":[]}}],"description":""}],"substrate_definition_list":[{"description":"","action_list":[],"type":"EXISTING_VM","name":"VM1","readiness_probe":{"connection_type":"SSH","retries":"5","connection_protocol":"","connection_port":22,"address":"@@{ip_address}@@","delay_secs":"60","disable_readiness_probe":true,"login_credential_local_reference":{"kind":"app_credential","name":"dsl"}},"os_type":"Linux","create_spec":{"type":"PROVISION_EXISTING_MACHINE","address":"192.168.222.170"},"variable_list":[]}],"credential_definition_list":[{"username":"dsl","description":"","type":"PASSWORD","secret":{"attrs":{"is_secret_modified":false,"secret_reference":{}}},"name":"dsl"},{"username":"frameuser","description":"","type":"PASSWORD","secret":{"attrs":{"is_secret_modified":false,"secret_reference":{}}},"name":"frameuser"}],"package_definition_list":[{"description":"","action_list":[],"type":"DEB","service_local_reference_list":[{"kind":"app_service","name":"Service1"}],"name":"Package1","version":"","options":{"install_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"Package1"},"retries":"0","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"source_accountID"},{"kind":"app_task","name":"destination_accountID"},{"kind":"app_task","name":"clone_sandbox"},{"kind":"app_task","name":"sandbox_poweron"},{"kind":"app_task","name":"create_endpoint"},{"kind":"app_task","name":"runbook"},{"kind":"app_task","name":"sandbox_poweroff"},{"kind":"app_task","name":"delete_endpoint"},{"kind":"app_task","name":"publish_sandbox"},{"kind":"app_task","name":"create_launchpad"}],"name":"7f215308_dag","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"source_accountID"},"edge_type":"user_defined","type":"","to_task_reference":{"kind":"app_task","name":"destination_accountID"}},{"from_task_reference":{"kind":"app_task","name":"destination_accountID"},"edge_type":"user_defined","type":"","to_task_reference":{"kind":"app_task","name":"clone_sandbox"}},{"from_task_reference":{"kind":"app_task","name":"clone_sandbox"},"edge_type":"user_defined","type":"","to_task_reference":{"kind":"app_task","name":"sandbox_poweron"}},{"from_task_reference":{"kind":"app_task","name":"sandbox_poweron"},"edge_type":"user_defined","type":"","to_task_reference":{"kind":"app_task","name":"create_endpoint"}},{"from_task_reference":{"kind":"app_task","name":"create_endpoint"},"edge_type":"user_defined","type":"","to_task_reference":{"kind":"app_task","name":"runbook"}},{"from_task_reference":{"kind":"app_task","name":"runbook"},"edge_type":"user_defined","type":"","to_task_reference":{"kind":"app_task","name":"sandbox_poweroff"}},{"from_task_reference":{"kind":"app_task","name":"sandbox_poweroff"},"edge_type":"user_defined","type":"","to_task_reference":{"kind":"app_task","name":"delete_endpoint"}},{"from_task_reference":{"kind":"app_task","name":"delete_endpoint"},"edge_type":"user_defined","type":"","to_task_reference":{"kind":"app_task","name":"publish_sandbox"}},{"from_task_reference":{"kind":"app_task","name":"publish_sandbox"},"edge_type":"user_defined","type":"","to_task_reference":{"kind":"app_task","name":"create_launchpad"}}],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"Service1"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"source_accountID","attrs":{"exit_status":[],"script":"#!\/bin\/bash\n\naccount=`\/home\/dsl\/Frame\/get_accounts_ID @@{frame_clientID}@@ @@{frame_client_secret}@@ @@{source_account_name}@@`\necho $account\necho \"source_accountID=$account\"","eval_variables":["source_accountID"],"eval_scope":"local","script_type":"sh","type":"","login_credential_local_reference":{"kind":"app_credential","name":"dsl"}},"timeout_secs":"0","type":"SET_VARIABLE","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"Service1"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"destination_accountID","attrs":{"exit_status":[],"script":"#!\/bin\/bash\n\naccount=`\/home\/dsl\/Frame\/get_accounts_ID @@{frame_clientID}@@ @@{frame_client_secret}@@ @@{destination_account_name}@@`\necho $account\necho \"destination_accountID=$account\"","eval_variables":["destination_accountID"],"eval_scope":"local","script_type":"sh","type":"","login_credential_local_reference":{"kind":"app_credential","name":"dsl"}},"timeout_secs":"0","type":"SET_VARIABLE","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"Service1"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"clone_sandbox","attrs":{"exit_status":[],"script":"#!\/bin\/bash\n\nanswer=`\/home\/dsl\/Frame\/sandbox_clone @@{frame_clientID}@@ @@{frame_client_secret}@@ @@{source_accountID}@@ @@{destination_accountID}@@`\necho $answer","script_type":"sh","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"dsl"}},"timeout_secs":"0","type":"EXEC","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"Service1"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"sandbox_poweron","attrs":{"exit_status":[],"script":"#!\/bin\/bash\n#in this case poweron sandbox and get IP address\n\nip=`\/home\/dsl\/Frame\/sandbox_action @@{frame_clientID}@@ @@{frame_client_secret}@@ @@{destination_accountID}@@ @@{sandbox_action}@@`\necho $ip\necho \"sandbox_ip=$ip\"","eval_variables":["sandbox_ip"],"eval_scope":"local","script_type":"sh","type":"","login_credential_local_reference":{"kind":"app_credential","name":"dsl"}},"timeout_secs":"0","type":"SET_VARIABLE","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"Service1"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"create_endpoint","attrs":{"exit_status":[],"script":"#!\/bin\/bash\n# create the endpoint with the IP address acquired by step before to create an endpoint\n# please give me blueprint name, vm_ip, cred_user,secret, account \n\nuuid=`\/home\/dsl\/Frame\/create_endpoint @@{calm_blueprint_name}@@ @@{sandbox_ip}@@ @@{frameuser.username}@@ @@{frameuser.secret}@@ @@{calm_application_name}@@`\n\necho $uuid\necho \"endpoint_uuid=$uuid\"","eval_variables":["endpoint_uuid"],"eval_scope":"local","script_type":"sh","type":"","login_credential_local_reference":{"kind":"app_credential","name":"dsl"}},"timeout_secs":"0","type":"SET_VARIABLE","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"Service1"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"runbook","attrs":{"exit_status":[],"script":"#!\/bin\/bash\n#here we associate endpoint to an existing runbook\n#please give runbook name, endpoint name, endpoint uuid\n\n\/home\/dsl\/Frame\/execute_runbook @@{runbookname}@@ sandbox_@@{destination_account_name}@@ @@{endpoint_uuid}@@\n\nsleep 60","script_type":"sh","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"dsl"}},"timeout_secs":"0","type":"EXEC","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"Service1"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"sandbox_poweroff","attrs":{"exit_status":[],"script":"#!\/bin\/bash\n#in this case poweroff sandbox\n\nip=`\/home\/dsl\/Frame\/sandbox_action @@{frame_clientID}@@ @@{frame_client_secret}@@ @@{destination_accountID}@@ stop`\necho $ip\necho \"sandbox_ip=$ip\"","script_type":"sh","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"dsl"}},"timeout_secs":"0","type":"EXEC","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"Service1"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"delete_endpoint","attrs":{"exit_status":[],"script":"#!\/bin\/bash\n# delete the endpoint created above to have a clean environment on Calm.\n\nuuid=`\/home\/dsl\/Frame\/delete_endpoint @@{endpoint_uuid}@@`\n\n","script_type":"sh","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"dsl"}},"timeout_secs":"0","type":"EXEC","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"Service1"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"publish_sandbox","attrs":{"exit_status":[],"script":"#!\/bin\/bash\n\nanswer=`\/home\/dsl\/Frame\/sandbox_publish @@{frame_clientID}@@ @@{frame_client_secret}@@ @@{destination_accountID}@@`\necho $answer","script_type":"sh","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"dsl"}},"timeout_secs":"0","type":"EXEC","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"Service1"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"create_launchpad","attrs":{"exit_status":[],"script":"#!\/bin\/bash\n# runbookname needs to be simple without underscore _ and special characters, otherwise Frame will fail launchpad creation\n\nanswer=`\/home\/dsl\/Frame\/create_launchpad @@{frame_clientID}@@ @@{frame_client_secret}@@ @@{destination_accountID}@@ @@{runbookname}@@`\necho $answer","script_type":"sh","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"dsl"}},"timeout_secs":"0","type":"EXEC","variable_list":[]}],"description":"","name":"ee215fd4_runbook","main_task_local_reference":{"kind":"app_task","name":"7f215308_dag"},"variable_list":[]},"type":"","uninstall_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"Package1"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"6459412c_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"4676a064_runbook","main_task_local_reference":{"kind":"app_task","name":"6459412c_dag"},"variable_list":[]}},"variable_list":[]}],"app_profile_list":[{"deployment_create_list":[{"type":"GREENFIELD","action_list":[],"name":"a3379536_deployment","min_replicas":"1","default_replicas":"1","depends_on_list":[],"published_service_local_reference_list":[],"max_replicas":"1","package_local_reference_list":[{"kind":"app_package","name":"Package1"}],"substrate_local_reference":{"kind":"app_substrate","name":"VM1"},"variable_list":[],"description":""}],"description":"","action_list":[],"name":"Default","variable_list":[{"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","type":"SECRET","name":"frame_clientID","value":"","label":"","attrs":{"is_secret_modified":false,"secret_reference":{},"type":"SECRET"},"is_hidden":false,"options":{"type":"PREDEFINED","choices":[]}},{"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","type":"SECRET","name":"frame_client_secret","value":"","label":"","attrs":{"is_secret_modified":false,"secret_reference":{},"type":"SECRET"},"is_hidden":false,"options":{"type":"PREDEFINED","choices":[]}},{"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","type":"LOCAL","name":"source_account_name","value":"prod","label":"","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"options":{"type":"PREDEFINED","choices":[]}},{"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","type":"LOCAL","name":"destination_account_name","value":"test","label":"","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"options":{"type":"PREDEFINED","choices":[]}},{"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","type":"LOCAL","name":"runbookname","value":"Simple_patching","label":"","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"options":{"type":"PREDEFINED","choices":[]}},{"regex":{"should_validate":false,"value":"^.*$"},"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","type":"LOCAL","name":"sandbox_action","value":"start","label":"","attrs":{"type":"LOCAL"},"is_hidden":false,"options":{"type":"PREDEFINED","choices":["start","stop"]}}]}],"published_service_definition_list":[],"default_credential_local_reference":{"kind":"app_credential","name":"dsl"},"type":"USER"},"name":"sandbox_update_automation"},"api_version":"3.0","metadata":{"last_update_time":"1612954604728743","kind":"blueprint","spec_version":19,"creation_time":"1612799543411300","name":"sandbox_update_automation"}}